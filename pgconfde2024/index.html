<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Box Framework</title>

	<link rel="stylesheet" href="dist/reset.css">
	<link rel="stylesheet" href="dist/reveal.css">
	<link rel="stylesheet" href="dist/theme/white.css">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section><!-- 1 min -->
				<img src="assets/logo.png">
				<h2 class="r-fit-text">Out of the Box web applications on top of PostgreSQL</h2>
				<p><a href="https://github.com/Insubric/box">https://github.com/Insubric/box</a></p>
			</section>
			<section><!-- 3 min -->
				<section>
					<h2>
						<code class="pgsql" style="text-align: left;" data-trim>
							select current_user
						</code>
					</h2>
					<code>> Andrea Minetti <a href="andrea.minetti@wsl.ch">andrea.minetti@wsl.ch</a></code>
					
				</section>
				<section>
					Background mainly in web development, worked in database development in the last few years.
				</section>
				<section>
					<p>Developing Box framework since 2016</p>
				</section>
				<section>
					<img src="assets/WSL.png" style="max-height: 150px;">
					<p>WSL is the Swiss Federal Institute for Forest Snow and Landscape Research, part of the ETH Domain</p>
				</section>
			</section>
			<section><!-- 3 min -->
				<section>
					<h3>Problem</h3>
					<p>How to let users interact with our DB? </p>
				
				</section>
				
				<section  data-transition="fade">
					<img src="assets/why/1.png" class="r-stretch">
				</section>
				<section data-transition="fade">
					<img src="assets/why/2.png" class="r-stretch">
				</section>
				<section data-transition="fade">
					<img src="assets/why/3.png" class="r-stretch">
				</section>
				<section data-transition="fade">
					<img src="assets/why/4.png" class="r-stretch">
				</section>
				<section data-transition="fade">
					<img src="assets/why/5.png" class="r-stretch">
				</section>
				<section data-transition="fade">
					<img src="assets/why/6.png" class="r-stretch">
				</section>

				<section>
					<h3>Solution:  Box Framework</h3>
					<p>Automatically builds a working web application by reading the database structure</p>
				</section>
				<section>
					<p>Originally developed for researchers<br>with basic database skills<br>to
						manage their own data</p>
				</section>
				<section data-auto-animate>
					<p>Open source ( Apache-2.0 license )</p>
				</section>
				<section data-auto-animate>
					<p>Open source ( Apache-2.0 license )</p>
					<small>No JiaT75 contributions</small>
				</section>
				
				
			</section>
			
		
			<section><!-- 3 min -->
				<section>
					<h3>Principles</h3>
					<ul>
						<li class="fragment">No application code needed
							<ul>
								<li class="fragment">Box user == DB user</li>
								<li class="fragment">Auto-generated forms for db tables/views</li>
								<li class="fragment">Forms definition saved in the DB</li>
								<li class="fragment">Web Admin interface</li>
							</ul>
						</li>
						<li class="fragment">Take advantage of PostgreSQL Features
							<ul>
								<li class="fragment">Row Level Security</li>
								<li class="fragment">Triggers</li>
								<li class="fragment">Updatable views</li>
								<li class="fragment">PostGIS</li>
						</li>
					</ul>
				</section>
				
				<!-- <section>
					<h3>Books</h3>
					<img src="assets/artofpostgresql.jpg" class="r-stretch">
					<p><small>The Art of PostgreSQL - Dimitri Fontaine</small></p>
				</section> -->
			</section>
			<section><!-- 4 min -->
				<section>
					<h3>UI</h3>
					<ul>
						<li class="fragment">Prebuilt widgets</li>
						<li class="fragment">Nested forms (One-to-many relationship)</li>
						<li class="fragment">GIS support (with SwissTopo Integration)</li>
					</ul>
				</section>
				<section>
					<h3>Std HTML input</h3>
					<img src="assets/ui/form.png">
				</section>
				<section>
					<h3>Tablechild widget</h3>
					<img src="assets/ui/tablechild.png">
				</section>
				<section>
					<h3>EditableTable widget</h3>
					<img src="assets/editableTable.png">
				</section>
				<section>
					<h3>Excel-like table (Preview)</h3>
					<img src="assets/ui/excel.png">
				</section>
				<section>
					<h3>File widget</h3>
					<img src="assets/ui/file.png">
				</section>
				<section>
					<h3>Map widget</h3>
					<img src="assets/ui/map.png">
				</section>
				
			</section>
			<section><!-- 1 min -->
				<section>
					<h3>Features</h3>
					<ul>
						<li class="fragment">REST API</li>
						<li class="fragment">Data export: XLS, CSV, SHP, Geopackage</li>
						<li class="fragment">Customizable HTML and PDF reports</li>
						<li class="fragment">Multi-language support</li>
						<li class="fragment">SMTP support</li>
						<li class="fragment">Public forms</li>
					</ul>
				</section>
			</section>
			
			<section>
				<section><!-- 2 min -->
					<h3>Implementation</h3>
					<p>Simple 3 tier architecture</p>
					<div class="r-hstack" style="justify-content: space-between;">
						<div>Presentation Layer: scala.js</div>
						<div style="width: 150px; text-align: center;"><img src="/assets/scalajs.svg" height="60"></div>
					</div>
					<div class="r-hstack" style="justify-content: space-between;">
						<div>Application Layer: scala</div>
						<div style="width: 150px; text-align: center;"><img src="/assets/scala.png" height="60"></div>
					</div>
					<div class="r-hstack" style="justify-content: space-between;">
						<div>Data Layer: PostgreSQL</div>
						<div style="width: 150px; text-align: center;"><img src="/assets/postgresql.svg" height="60"></div>
					</div>
				</section>
				<section>
					<h3>Implementation</h3>
					<p>On installation, a new box schema is created in the db with all configuration required by the system</p>
				</section>
				<section>
					<h3>Requirements</h3>
					<ul>
						<li>PostrgreSQL 13+</li>
						<li>Java 17+ (i.e. https://adoptium.net/ )</li>
					</ul>
				</section>
				<section>
					<h3>DevOps/Deploy</h3>
					<ul>
						<li>Publish docker image</li>
						<li>Gitlab CI workflow (trigger on commit tag)</li>
						<li>Github Actions workflow (trigger on commit tag)</li>
					</ul>
				</section>
				<section>
					<h3>Bootstrap</h3>
					<p>Download starter package from:<br> <a target="_blank" href="https://github.com/Insubric/box-starter/releases">https://github.com/Insubric/box-starter/releases</a><br>	 unzip and run
					<pre>
						<code>
							$ ./install.sh
							$ ./run.sh
						</code>
					</pre>
				</section>
			</section>
			<section><!-- 15 min -->
				<section>
					<h1>DEMO</h1>
				</section>
				<section >
					<h3>Demo database</h3>
					<p>
						<a href="https://github.com/lerocha/chinook-database">https://github.com/lerocha/chinook-database</a>
					</p>
				</section>
				<section >
					<img src="assets/schema.png" class="r-stretch">
				</section>
					
			</section>
			
			<section><!-- 1 min -->
				<h3>Next step</h3>
				<ul>
					<li>User management in admin interface</li>
					<li>Improve GIS support</li>
					<li>Web Interface to simplify the deploy process (no terminal needed)</li>
					<li>Offline-first web application</li>
					<li>Integration with other reporting systems (i.e. R shiny)</li>
					<li>JSONSchema/OpenAPI native support</li>
					<li>SSO integration</li>
				</ul>
			</section>
			
			
			<section>
				<h2>Thank you!</h2>
				<a href="https://www.boxframework.com">www.boxframework.com</a><br>
				<a href="https://github.com/Insubric/box">github.com/Insubric/box</a>
			</section>
		</div>
	</div>
	<footer>
		<div style="display: flex; padding: 0 130px; justify-content: space-between; align-items: center;">
			<img src="assets/logo.png" style="max-height: 80px;">
			<img src="assets/wsl_logo.png" style="max-height: 50px;">
		</div>
	</footer>

	<script src="dist/reveal.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,

			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});

		Reveal.on( 'slidechanged', event => {
			if(event.indexh == 0) {
				document.getElementsByTagName("footer").item(0).style.display = "none";
			} else {
				document.getElementsByTagName("footer").item(0).style.display = "block";
			}
		} );
	</script>
</body>

</html>